[tox]
envlist = flake8, pylint, dominator

[testenv]
usedevelop = true

[testenv:flake8]
commands = flake8 obedient setup.py
deps = flake8

[testenv:pylint]
whitelist_externals = sh
commands = sh -c 'pylint -f colorized -rn obedient setup.py || true'
deps = pylint

[testenv:dominator]
whitelist_externals = dominator
commands = dominator -c fixtures/settings.yaml -ldebug edit discover local
           dominator -c fixtures/settings.yaml -ldebug --vcr=fixtures/generate.yaml edit generate obedient.powny test
           dominator -c fixtures/settings.yaml -ldebug --vcr=fixtures/deploy.yaml container stop start status -d stop
deps = dominator
sitepackages = True
# Because of bug in pip https://github.com/pypa/pip/issues/3
usedevelop = False

[flake8]
max-line-length = 120
